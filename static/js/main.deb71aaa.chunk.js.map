{"version":3,"sources":["App.js","index.js"],"names":["matvec","v","M","result","i","length","row","terms","j","M_item","v_item","k","push","computeTT","board","num","lhs","rhs","map","last","tt","Array","fill","reduce","Cell","classNames","this","props","isLastRole","isFirstRole","className","onChange","value","React","Component","Board","state","size","parseInt","boardSize","emptyVMatrix","handlePlus","bind","handleMinus","r2","e","val","target","setState","notifyListeners","handleUpdate","splice","lrow","board_items","toString","onClick","boardItems","NumberScroll","min","max","isNaN","handleScroll","preventDefault","delta","Math","sign","deltaY","new_val","onWheel","label","MainPanel","undefined","len","handleLenUpdate","newState","index","App","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.deb71aaa.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./styles.css\";\n\nfunction matvec(v, M) {\n  let result = [];\n  for (let i = 0; i < M.length; i++) {\n    let row = M[i];\n    let terms = [];\n    for (let j = 0; j < row.length; j++) {\n      let M_item = row[j];\n      let v_item = v[j];\n      if (M_item && v_item) {\n        for (let k = 0; k < v_item.length; k++) {\n          terms.push(M_item + \"Â·\" + v_item[k]);\n        }\n      }\n    }\n    result.push(terms);\n  }\n  return result;\n}\n\nfunction computeTT(board, num) {\n  let lhs = [board[0]];\n  let rhs = board.map((row) => {\n    let last = row[row.length - 1];\n    return last ? [last] : null;\n  });\n  let tt = Array(num).fill(board);\n  tt[0] = rhs;\n  tt[num - 1] = lhs;\n  return tt.reduce(matvec)[0];\n}\n\nclass Cell extends React.Component {\n  render() {\n    let classNames =\n      \"cell cell-dropdown\" +\n      (this.props.isLastRole\n        ? \" cell-role-end\"\n        : this.props.isFirstRole\n        ? \" cell-role-start\"\n        : \"\");\n    return (\n      <select\n        className={classNames}\n        onChange={this.props.onChange}\n        value={this.props.value}\n      >\n        <option value=\"\"></option>\n        <option value=\"1\">1</option>\n        <option value=\"sx\">sx</option>\n        <option value=\"sy\">sy</option>\n        <option value=\"sz\">sz</option>\n        <option value=\"c+\">c+</option>\n        <option value=\"c-\">c-</option>\n      </select>\n    );\n  }\n}\n\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      size: parseInt(this.props.boardSize, 10),\n      board: this.emptyVMatrix(this.props.boardSize)\n    };\n    this.handlePlus = this.handlePlus.bind(this);\n    this.handleMinus = this.handleMinus.bind(this);\n  }\n\n  emptyVMatrix(size) {\n    let result = [];\n    for (let i = 0; i < size; i++) {\n      let r2 = [];\n      result.push(r2);\n      for (let j = 0; j < size; j++) {\n        r2.push(\"\");\n      }\n    }\n    return result;\n  }\n\n  handleUpdate(i, j, e) {\n    let val = e.target.value;\n    let board = this.state.board;\n    board[i][j] = val === \"0\" ? null : val;\n    this.setState({\n      board: board\n    });\n    this.notifyListeners(board);\n  }\n\n  notifyListeners(board) {\n    if (this.props.handleUpdate) {\n      this.props.handleUpdate(board);\n    }\n  }\n\n  handlePlus() {\n    let size = this.state.size + 1;\n    let board = this.state.board.map((row) => {\n      row.splice(-1, 0, \"\");\n      return row;\n    });\n    let lrow = Array(size);\n    lrow.fill(\"\");\n    board.splice(-1, 0, lrow);\n    this.setState({\n      size: size,\n      board: board\n    });\n    this.notifyListeners(board);\n  }\n\n  handleMinus() {\n    let size = this.state.size - 1;\n    if (size > 0) {\n      let board = this.state.board.map((row) => {\n        row.splice(-2, 1);\n        return row;\n      });\n      board.splice(-2, 1);\n      this.setState({\n        size: size,\n        board: board\n      });\n      this.notifyListeners(board);\n    }\n  }\n\n  render() {\n    let board_items = [];\n    let size = this.state.size;\n    for (let i = 0; i < size; i++) {\n      for (let j = 0; j < size; j++) {\n        board_items.push(\n          <Cell\n            key={\"c\" + (i * size + j).toString()}\n            onChange={this.handleUpdate.bind(this, i, j)}\n            value={this.state.board[i][j]}\n            isLastRole={j === size - 1}\n            isFirstRole={i === 0}\n          />\n        );\n      }\n      if (i === 0) {\n        board_items.push(\n          <div className=\"cell cell-special\" onClick={this.handlePlus} key=\"+\">\n            +\n          </div>\n        );\n      } else if (i === 1) {\n        board_items.push(\n          <div className=\"cell cell-special\" onClick={this.handleMinus} key=\"-\">\n            -\n          </div>\n        );\n      }\n      board_items.push(<div key={\"eol\" + i.toString()} className=\"clear\" />);\n    }\n    this.boardItems = board_items;\n    return <div className=\"board\">{board_items}</div>;\n  }\n}\n\nclass NumberScroll extends React.Component {\n  constructor(props) {\n    super(props);\n    let min = parseInt(props.min, 10);\n    let max = parseInt(props.max, 10);\n    let v = parseInt(props.val, 10);\n    if (isNaN(min)) min = 0;\n    if (isNaN(max)) max = 100;\n    if (isNaN(v)) v = min;\n    this.state = {\n      min: min,\n      max: max,\n      val: v\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n  }\n\n  handleScroll(e) {\n    e.preventDefault();\n    let delta = -Math.sign(e.deltaY);\n    if (!isNaN(delta)) {\n      let new_val = this.state.val + delta;\n      if (this.state.min <= new_val && new_val <= this.state.max) {\n        this.setState({\n          val: new_val\n        });\n        if (this.props.onChange) {\n          this.props.onChange(new_val);\n        }\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"cell cell-scroll cell-double cell-special\"\n        onWheel={this.handleScroll}\n      >\n        {this.props.label}\n        {this.state.val}\n      </div>\n    );\n  }\n}\n\nclass MainPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      terms: [],\n      board: undefined,\n      len: undefined\n    };\n    this.handleUpdate = this.handleUpdate.bind(this);\n    this.handleLenUpdate = this.handleLenUpdate.bind(this);\n  }\n\n  handleUpdate(board) {\n    let newState = { board: board };\n    if (this.state.len) newState[\"terms\"] = computeTT(board, this.state.len);\n    this.setState(newState);\n  }\n\n  handleLenUpdate(len) {\n    let newState = { len: len };\n    if (this.state.board) newState[\"terms\"] = computeTT(this.state.board, len);\n    this.setState(newState);\n  }\n\n  render() {\n    return (\n      <div>\n        <Board boardSize=\"2\" handleUpdate={this.handleUpdate} />\n        <NumberScroll\n          min=\"2\"\n          max=\"99\"\n          onChange={this.handleLenUpdate}\n          label=\"length: \"\n        />\n        <div className=\"clear\" />\n        <div>\n          {this.state.terms.map((value, index) => {\n            return (\n              <div key={index} className=\"product-term\">\n                {value}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function App() {\n  return <MainPanel />;\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}